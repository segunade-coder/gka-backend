var ot=e=>{throw TypeError(e)};var G=(e,t,r)=>t.has(e)||ot("Cannot "+r);var s=(e,t,r)=>(G(e,t,"read from private field"),r?r.call(e):t.get(e)),y=(e,t,r)=>t.has(e)?ot("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),u=(e,t,r,i)=>(G(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),l=(e,t,r)=>(G(e,t,"access private method"),r);import{S as bt,d as x,s as V,e as P,n as vt,i as ht,f as ut,g as Rt,h as Ct,k as xt,l as ct,m as yt,r as E,o as St,j as I,I as wt}from"./index-BeAxn-rD.js";import{z as Et,A as Ot,B as Ft,C as It,D as Qt,E as qt,F as Dt,G as jt,H as Tt,J as Ut,K as Mt,L as Bt}from"./mutation-k6Jjsx-7.js";import{i as Kt}from"./utils-BSyYn143.js";import{B as At}from"./button-CnW8wkBp.js";import{h as Lt}from"./index-B3O55ij7.js";var m,n,A,p,Q,j,C,L,T,U,q,D,O,M,a,K,W,J,X,Y,Z,$,tt,pt,ft,Nt=(ft=class extends bt{constructor(t,r){super();y(this,a);y(this,m);y(this,n);y(this,A);y(this,p);y(this,Q);y(this,j);y(this,C);y(this,L);y(this,T);y(this,U);y(this,q);y(this,D);y(this,O);y(this,M,new Set);this.options=r,u(this,m,t),u(this,C,null),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(s(this,n).addObserver(this),lt(s(this,n),this.options)?l(this,a,K).call(this):this.updateResult(),l(this,a,Y).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return et(s(this,n),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return et(s(this,n),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,l(this,a,Z).call(this),l(this,a,$).call(this),s(this,n).removeObserver(this)}setOptions(t,r){const i=this.options,f=s(this,n);if(this.options=s(this,m).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof x(this.options.enabled,s(this,n))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");l(this,a,tt).call(this),s(this,n).setOptions(this.options),i._defaulted&&!V(this.options,i)&&s(this,m).getQueryCache().notify({type:"observerOptionsUpdated",query:s(this,n),observer:this});const c=this.hasListeners();c&&dt(s(this,n),f,this.options,i)&&l(this,a,K).call(this),this.updateResult(r),c&&(s(this,n)!==f||x(this.options.enabled,s(this,n))!==x(i.enabled,s(this,n))||P(this.options.staleTime,s(this,n))!==P(i.staleTime,s(this,n)))&&l(this,a,W).call(this);const o=l(this,a,J).call(this);c&&(s(this,n)!==f||x(this.options.enabled,s(this,n))!==x(i.enabled,s(this,n))||o!==s(this,O))&&l(this,a,X).call(this,o)}getOptimisticResult(t){const r=s(this,m).getQueryCache().build(s(this,m),t),i=this.createResult(r,t);return _t(this,i)&&(u(this,p,i),u(this,j,this.options),u(this,Q,s(this,n).state)),i}getCurrentResult(){return s(this,p)}trackResult(t,r){const i={};return Object.keys(t).forEach(f=>{Object.defineProperty(i,f,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(f),r==null||r(f),t[f])})}),i}trackProp(t){s(this,M).add(t)}getCurrentQuery(){return s(this,n)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=s(this,m).defaultQueryOptions(t),i=s(this,m).getQueryCache().build(s(this,m),r);return i.isFetchingOptimistic=!0,i.fetch().then(()=>this.createResult(i,r))}fetch(t){return l(this,a,K).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),s(this,p)))}createResult(t,r){var at;const i=s(this,n),f=this.options,c=s(this,p),o=s(this,Q),d=s(this,j),S=t!==i?t.state:s(this,A),{state:w}=t;let h={...w},B=!1,g;if(r._optimisticResults){const b=this.hasListeners(),z=!b&&lt(t,r),gt=b&&dt(t,i,r,f);(z||gt)&&(h={...h,...xt(w.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:N,errorUpdatedAt:rt,status:F}=h;if(r.select&&h.data!==void 0)if(c&&h.data===(o==null?void 0:o.data)&&r.select===s(this,L))g=s(this,T);else try{u(this,L,r.select),g=r.select(h.data),g=ct(c==null?void 0:c.data,g,r),u(this,T,g),u(this,C,null)}catch(b){u(this,C,b)}else g=h.data;if(r.placeholderData!==void 0&&g===void 0&&F==="pending"){let b;if(c!=null&&c.isPlaceholderData&&r.placeholderData===(d==null?void 0:d.placeholderData))b=c.data;else if(b=typeof r.placeholderData=="function"?r.placeholderData((at=s(this,U))==null?void 0:at.state.data,s(this,U)):r.placeholderData,r.select&&b!==void 0)try{b=r.select(b),u(this,C,null)}catch(z){u(this,C,z)}b!==void 0&&(F="success",g=ct(c==null?void 0:c.data,b,r),B=!0)}s(this,C)&&(N=s(this,C),g=s(this,T),rt=Date.now(),F="error");const _=h.fetchStatus==="fetching",k=F==="pending",H=F==="error",it=k&&_,nt=g!==void 0;return{status:F,fetchStatus:h.fetchStatus,isPending:k,isSuccess:F==="success",isError:H,isInitialLoading:it,isLoading:it,data:g,dataUpdatedAt:h.dataUpdatedAt,error:N,errorUpdatedAt:rt,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>S.dataUpdateCount||h.errorUpdateCount>S.errorUpdateCount,isFetching:_,isRefetching:_&&!k,isLoadingError:H&&!nt,isPaused:h.fetchStatus==="paused",isPlaceholderData:B,isRefetchError:H&&nt,isStale:st(t,r),refetch:this.refetch}}updateResult(t){const r=s(this,p),i=this.createResult(s(this,n),this.options);if(u(this,Q,s(this,n).state),u(this,j,this.options),s(this,Q).data!==void 0&&u(this,U,s(this,n)),V(i,r))return;u(this,p,i);const f={},c=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,d=typeof o=="function"?o():o;if(d==="all"||!d&&!s(this,M).size)return!0;const R=new Set(d??s(this,M));return this.options.throwOnError&&R.add("error"),Object.keys(s(this,p)).some(S=>{const w=S;return s(this,p)[w]!==r[w]&&R.has(w)})};(t==null?void 0:t.listeners)!==!1&&c()&&(f.listeners=!0),l(this,a,pt).call(this,{...f,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&l(this,a,Y).call(this)}},m=new WeakMap,n=new WeakMap,A=new WeakMap,p=new WeakMap,Q=new WeakMap,j=new WeakMap,C=new WeakMap,L=new WeakMap,T=new WeakMap,U=new WeakMap,q=new WeakMap,D=new WeakMap,O=new WeakMap,M=new WeakMap,a=new WeakSet,K=function(t){l(this,a,tt).call(this);let r=s(this,n).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(vt)),r},W=function(){l(this,a,Z).call(this);const t=P(this.options.staleTime,s(this,n));if(ht||s(this,p).isStale||!ut(t))return;const i=Rt(s(this,p).dataUpdatedAt,t)+1;u(this,q,setTimeout(()=>{s(this,p).isStale||this.updateResult()},i))},J=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(s(this,n)):this.options.refetchInterval)??!1},X=function(t){l(this,a,$).call(this),u(this,O,t),!(ht||x(this.options.enabled,s(this,n))===!1||!ut(s(this,O))||s(this,O)===0)&&u(this,D,setInterval(()=>{(this.options.refetchIntervalInBackground||Ct.isFocused())&&l(this,a,K).call(this)},s(this,O)))},Y=function(){l(this,a,W).call(this),l(this,a,X).call(this,l(this,a,J).call(this))},Z=function(){s(this,q)&&(clearTimeout(s(this,q)),u(this,q,void 0))},$=function(){s(this,D)&&(clearInterval(s(this,D)),u(this,D,void 0))},tt=function(){const t=s(this,m).getQueryCache().build(s(this,m),this.options);if(t===s(this,n))return;const r=s(this,n);u(this,n,t),u(this,A,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},pt=function(t){yt.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(s(this,p))}),s(this,m).getQueryCache().notify({query:s(this,n),type:"observerResultsUpdated"})})},ft);function Pt(e,t){return x(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function lt(e,t){return Pt(e,t)||e.state.data!==void 0&&et(e,t,t.refetchOnMount)}function et(e,t,r){if(x(t.enabled,e)!==!1){const i=typeof r=="function"?r(e):r;return i==="always"||i!==!1&&st(e,t)}return!1}function dt(e,t,r,i){return(e!==t||x(i.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&st(e,r)}function st(e,t){return x(t.enabled,e)!==!1&&e.isStaleByTime(P(t.staleTime,e))}function _t(e,t){return!V(e.getCurrentResult(),t)}var mt=E.createContext(!1),kt=()=>E.useContext(mt);mt.Provider;function Ht(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var zt=E.createContext(Ht()),Gt=()=>E.useContext(zt),Vt=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},Wt=e=>{E.useEffect(()=>{e.clearReset()},[e])},Jt=({result:e,errorResetBoundary:t,throwOnError:r,query:i})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&Et(r,[e.error,i]),Xt=e=>{e.suspense&&(typeof e.staleTime!="number"&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Yt=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Zt=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function $t(e,t,r){var S,w,h,B;const i=St(),f=kt(),c=Gt(),o=i.defaultQueryOptions(e);(w=(S=i.getDefaultOptions().queries)==null?void 0:S._experimental_beforeQuery)==null||w.call(S,o),o._optimisticResults=f?"isRestoring":"optimistic",Xt(o),Vt(o,c),Wt(c);const[d]=E.useState(()=>new t(i,o)),R=d.getOptimisticResult(o);if(E.useSyncExternalStore(E.useCallback(g=>{const N=f?()=>{}:d.subscribe(yt.batchCalls(g));return d.updateResult(),N},[d,f]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),E.useEffect(()=>{d.setOptions(o,{listeners:!1})},[o,d]),Yt(o,R))throw Zt(o,d,c);if(Jt({result:R,errorResetBoundary:c,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash)}))throw R.error;return(B=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||B.call(h,o,R),o.notifyOnChangeProps?R:d.trackResult(R)}function v(e,t){return $t(e,Nt)}const oe=()=>v({queryKey:["initial"],queryFn:()=>Ot()}),he=()=>v({queryKey:["slider"],queryFn:()=>Ft()}),ue=()=>v({queryKey:["about"],queryFn:()=>It()}),ce=()=>v({queryKey:["history"],queryFn:()=>Qt()}),le=()=>v({queryKey:["gallery"],queryFn:()=>qt()}),de=()=>v({queryKey:["news"],queryFn:()=>Dt()}),fe=e=>v({queryKey:["news",{id:e}],queryFn:()=>jt(e),enabled:!!e}),ye=()=>v({queryKey:["reviews"],queryFn:()=>Tt()}),pe=()=>v({queryKey:["account-status"],queryFn:()=>Ut(),retry:0,refetchInterval:1e3*60*20}),me=()=>v({queryKey:["events"],queryFn:()=>Mt()}),ge=()=>v({queryKey:["messages"],queryFn:()=>Bt()}),be=()=>I.jsx("div",{className:"w-full h-[80vh] flex items-center justify-center",children:I.jsx(wt,{className:"animate-spin text-4xl text-primary"})}),ve=({refetch:e})=>I.jsxs("div",{className:"w-full h-[70vh] flex items-center justify-center flex-col",children:[I.jsx("img",{src:Kt.errorIcon,className:"w-[100px] h-[100px] object-contain"}),I.jsx("p",{className:"py-4 text-gray-500 text-lg",children:"An Error occurred while fetching data"}),I.jsxs(At,{size:"sm",className:"bg-primary text-white hover:bg-primary/80",onClick:()=>e(),children:["Reload ",I.jsx(Lt,{})]})]});export{be as Q,ve as a,le as b,ce as c,de as d,fe as e,me as f,ge as g,ye as h,oe as i,pe as j,he as k,ue as u};
