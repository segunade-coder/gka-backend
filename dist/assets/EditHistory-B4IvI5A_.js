import{j as e,r as n,t as l}from"./index-TnTDpqy4.js";import{E as f}from"./EditTitle-oV89VDYS.js";import{Q as j}from"./QueryError-DYvvzKg8.js";import{c as b,Q as w}from"./QueryLoader-DhoxU_H3.js";import{B as C}from"./index-ye2DFzoX.js";import{C as H,a as v,b as E,c as I,d as N,e as P}from"./card-DpPbYb8A.js";import{I as S}from"./input-IbiUdbIM.js";import{L as m}from"./label-DBLE-kze.js";import{T as V}from"./textarea-CZIzAeAe.js";import{d as F}from"./mutation-DY6GVtB-.js";import{F as L}from"./index-eFnFOOut.js";import"./api-xF4wnrL7.js";import"./utils-CRrKglZt.js";import"./index-B_X_e_ga.js";const J=()=>{const{data:r,isLoading:a,isError:d,refetch:o}=b();return a?e.jsx(w,{}):d?e.jsx(j,{refetch:o}):r?e.jsxs("div",{className:"px-5",children:[e.jsx(f,{text:"Edit About page"}),e.jsx(T,{data:r})]}):e.jsx("div",{children:"No data found"})},T=({data:r})=>{const[a,d]=n.useState(r.text.trim()),[o,y]=n.useState(r.yearsInService||1),i=n.useRef(null),[p,u]=n.useState(!1),h=F(),g=async()=>{if(a!==""&&o!==0){l.loading("loading...",{id:"loading-edit-history"}),u(!0);try{await h.mutateAsync({history:a,years:o,id:r.id}),l.dismiss("loading-edit-history"),l.success("Success",{description:"History Modified successfully"})}finally{u(!1)}}else l.warning("Warning",{description:"Please, fill in all necessary fields"})};n.useEffect(()=>{try{i.current.style.height="inherit";const t=window.getComputedStyle(i.current),s=parseInt(t.getPropertyValue("border-top-width"),10)+parseInt(t.getPropertyValue("padding-top"),10)+i.current.scrollHeight+parseInt(t.getPropertyValue("padding-bottom"),10)+parseInt(t.getPropertyValue("border-bottom-width"),10);i.current.style.height=`${s}px`}catch(t){console.log(t)}},[]);function c(t){t.target.style.height="inherit";const s=window.getComputedStyle(t.target),x=parseInt(s.getPropertyValue("border-top-width"),10)+parseInt(s.getPropertyValue("padding-top"),10)+t.target.scrollHeight+parseInt(s.getPropertyValue("padding-bottom"),10)+parseInt(s.getPropertyValue("border-bottom-width"),10);t.target.style.height=`${x}px`}return e.jsxs(H,{className:"w-full md:w-[500px] my-5 shadow-lg border-slate-300",children:[e.jsxs(v,{children:[e.jsx(E,{children:"Edit History"}),e.jsx(I,{children:"Click text to edit"})]}),e.jsx(N,{children:e.jsx("form",{children:e.jsxs("div",{className:"grid w-full items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col space-y-1.5",children:[e.jsx(m,{htmlFor:"text py-5",children:"History Text"}),e.jsx(V,{id:"text",placeholder:"Edit history text.",value:a,onChange:t=>d(t.target.value),onKeyDown:t=>c(t),onPaste:t=>c(t),onBlur:t=>c(t),ref:i,autoFocus:!0,className:"text-gray-500 border-slate-300"})]}),e.jsxs("div",{className:"flex flex-col space-y-1.5",children:[e.jsx(m,{htmlFor:"years",className:"py-2",children:"Years of Service"}),e.jsx(S,{id:"years",type:"number",value:o,onChange:t=>y(parseInt(t.target.value)),className:"border-slate-300"})]})]})})}),e.jsx(P,{className:"flex justify-end",children:e.jsxs(C,{type:"submit",onClick:()=>g(),disabled:p,children:["Save ",p?e.jsx(L,{className:"animate-spin"}):""]})})]})};export{J as default};
