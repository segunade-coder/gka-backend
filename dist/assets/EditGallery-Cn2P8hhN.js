import{r as t,j as e,t as i}from"./index-BeAxn-rD.js";import{b as j,Q as y,a as D}from"./QueryError-B0UFlBFl.js";import{E as v}from"./EditTitle-9xyaiiax.js";import{D as N,a as b,b as w,c as A,d as C,e as E,f as G,g as L}from"./dialog-Cq5ivOUq.js";import{B as l}from"./button-CnW8wkBp.js";import{B as S}from"./index-B3O55ij7.js";import{I as F}from"./input-Cm4KjBrU.js";import{a as I}from"./EditCard-L0NheN3d.js";import{b as T}from"./mutation-k6Jjsx-7.js";import{F as B}from"./index-DWY52yME.js";import"./utils-BSyYn143.js";import"./createLucideIcon-DrXMUdrG.js";import"./x-B7GdSYkf.js";import"./index-B6WPZvSL.js";import"./index-CdSMw2BV.js";import"./alert-dialog-BA_ftJTS.js";import"./label-DE94ioFY.js";const Z=()=>{const{data:a,isLoading:c,isError:p,refetch:g}=j(),[r,o]=t.useState(),[x,n]=t.useState(!1),[d,m]=t.useState(!1),u=T();if(c)return e.jsx(y,{});if(p)return e.jsx(D,{refetch:g});if(!a)return e.jsx("div",{children:"No data found"});const f=async()=>{if(r){const s=new FormData;Array.from(r).map(h=>{s.append("image",h)}),i.loading("Loading...",{id:"loading-add-gallery"}),m(!0);try{await u.mutateAsync(s),n(!1),i.dismiss("loading-add-gallery"),i.success("Success",{description:`Image${Image.length>0?"s":""} added to gallery successfully`}),o(null)}finally{m(!1)}}else i.warning("Warning",{description:"Select one or more images"})};return e.jsxs("div",{className:"px-5",children:[e.jsx(v,{text:"Edit Gallery"}),e.jsxs(N,{open:x,onOpenChange:n,children:[e.jsx(b,{asChild:!0,children:e.jsxs(l,{size:"sm",className:"bg-primary hover:bg-primary/80 text-sm flex gap-2 py-2 px-4 text-white items-center rounded-md ml-auto md:mr-10",children:["Add ",e.jsx(S,{})]})}),e.jsxs(w,{className:"max-h-screen overflow-auto",children:[e.jsxs(A,{children:[e.jsx(C,{children:"Add image to gallery"}),e.jsx(E,{children:"Add a single or multiple image to gallery."})]}),e.jsxs("div",{children:[e.jsx(F,{type:"file",className:"ring-1 ring-slate-300 my-4",id:"image",multiple:!0,onChange:s=>o(s.target.files),accept:"image/*"}),r&&(r==null?void 0:r.length)>0?e.jsx("div",{className:"w-full h-auto flex gap-2 flex-wrap",children:Array.from(r).map(s=>e.jsx("img",{src:URL.createObjectURL(s),alt:"",className:"object-cover w-[100px] h-[100px] object-top rounded-full ring-2 ring-slate-400"}))}):""]}),e.jsxs(G,{children:[e.jsxs(l,{type:"submit",className:"",onClick:()=>f(),disabled:d,children:["Add ",d?e.jsx(B,{className:"animate-spin"}):""]}),e.jsx(L,{asChild:!0,children:e.jsx(l,{variant:"destructive",children:"Discard"})})]})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap my-2 justify-center sm:justify-start",children:a&&(a==null?void 0:a.length)>0?a==null?void 0:a.map(s=>e.jsx(I,{gallery:s},s.id)):e.jsx("div",{children:"Nothing here"})})]})};export{Z as default};
