import{r as t,j as e,t as i}from"./index-u7P1YQNW.js";import{b as j,Q as y,a as D}from"./QueryError-BNPsRO22.js";import{E as b}from"./EditTitle-DITetb6n.js";import{D as v,a as N,b as A,c as C,d as E,e as w,f as G,g as L}from"./dialog-DDWPh5IZ.js";import{B as l,a as S}from"./index-BudcPwbM.js";import{I as F}from"./input-CCE2vcG_.js";import{a as I}from"./EditCard-ebXb0J-Y.js";import{b as T}from"./mutation-DP-RHYig.js";import{F as B}from"./index-ssfv9w_u.js";import"./api-BEGC1kzT.js";import"./x-CCHsWoFW.js";import"./createLucideIcon-BoXsIDKd.js";import"./index-C5_Zht4W.js";import"./utils-CRrKglZt.js";import"./index-COqTiIdB.js";import"./index-V5MykzTN.js";import"./alert-dialog-2sjAYl4a.js";import"./label-BhmIV6CQ.js";const _=()=>{const{data:a,isLoading:c,isError:p,refetch:g}=j(),[r,o]=t.useState(),[x,n]=t.useState(!1),[d,m]=t.useState(!1),u=T();if(c)return e.jsx(y,{});if(p)return e.jsx(D,{refetch:g});if(!a)return e.jsx("div",{children:"No data found"});const f=async()=>{if(r){const s=new FormData;Array.from(r).map(h=>{s.append("image",h)}),i.loading("Loading...",{id:"loading-add-gallery"}),m(!0);try{await u.mutateAsync(s),n(!1),i.dismiss("loading-add-gallery"),i.success("Success",{description:`Image${Image.length>0?"s":""} added to gallery successfully`}),o(null)}finally{m(!1)}}else i.warning("Warning",{description:"Select one or more images"})};return e.jsxs("div",{className:"px-5",children:[e.jsx(b,{text:"Edit Gallery"}),e.jsxs(v,{open:x,onOpenChange:n,children:[e.jsx(N,{asChild:!0,children:e.jsxs(l,{size:"sm",className:"bg-primary hover:bg-primary/80 text-sm flex gap-2 py-2 px-4 text-white items-center rounded-md ml-auto md:mr-10",children:["Add ",e.jsx(S,{})]})}),e.jsxs(A,{children:[e.jsxs(C,{children:[e.jsx(E,{children:"Add image to gallery"}),e.jsx(w,{children:"Add a single or multiple image to gallery."})]}),e.jsxs("div",{children:[e.jsx(F,{type:"file",className:"ring-1 ring-slate-300 my-4",id:"image",multiple:!0,onChange:s=>o(s.target.files),accept:"image/*"}),r&&(r==null?void 0:r.length)>0?e.jsx("div",{className:"w-full h-auto flex gap-2 flex-wrap",children:Array.from(r).map(s=>e.jsx("img",{src:URL.createObjectURL(s),alt:"",className:"object-cover w-[100px] h-[100px] object-top rounded-full ring-2 ring-slate-400"}))}):""]}),e.jsxs(G,{children:[e.jsxs(l,{type:"submit",className:"",onClick:()=>f(),disabled:d,children:["Add ",d?e.jsx(B,{className:"animate-spin"}):""]}),e.jsx(L,{asChild:!0,children:e.jsx(l,{variant:"destructive",children:"Discard"})})]})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap my-2 justify-center md:justify-start",children:a&&(a==null?void 0:a.length)>0?a==null?void 0:a.map(s=>e.jsx(I,{gallery:s},s.id)):e.jsx("div",{children:"Nothing here"})})]})};export{_ as default};
